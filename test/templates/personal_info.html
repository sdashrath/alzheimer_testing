{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <h2>Personal Information</h2>

    <!-- Error Summary -->
    {% if errors %}
    <div class="error-summary">
        <h4>Please correct the following errors:</h4>
        <ul>
            {% for field, error in errors.items() %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form method="POST" action="{{ url_for('personal_info') }}">
        <!-- First Name -->
        <label for="first_name">First Name:</label>
        <input 
            type="text" 
            id="first_name" 
            name="first_name" 
            value="{{ form_data.get('first_name', '') }}" 
            class="{% if errors.first_name %}error{% endif %}" 
            required>
        {% if errors.first_name %}
        <div class="field-error">{{ errors.first_name }}</div>
        {% endif %}

        <!-- Last Name -->
        <label for="last_name">Last Name:</label>
        <input 
            type="text" 
            id="last_name" 
            name="last_name" 
            value="{{ form_data.get('last_name', '') }}" 
            class="{% if errors.last_name %}error{% endif %}" 
            required>
        {% if errors.last_name %}
        <div class="field-error">{{ errors.last_name }}</div>
        {% endif %}

        <!-- Street Address -->
        <label for="street_address">Street Address:</label>
        <input 
            type="text" 
            id="street_address" 
            name="street_address" 
            value="{{ form_data.get('street_address', '') }}" 
            class="{% if errors.street_address %}error{% endif %}">
        {% if errors.street_address %}
        <div class="field-error">{{ errors.street_address }}</div>
        {% endif %}

        <!-- City -->
        <label for="city">City:</label>
        <input 
            type="text" 
            id="city" 
            name="city" 
            value="{{ form_data.get('city', '') }}" 
            class="{% if errors.city %}error{% endif %}">
        {% if errors.city %}
        <div class="field-error">{{ errors.city }}</div>
        {% endif %}

        <!-- ZIP Code -->
        <label for="zip_code">ZIP Code:</label>
        <input 
            type="text" 
            id="zip_code" 
            name="zip_code" 
            value="{{ form_data.get('zip_code', '') }}" 
            class="{% if errors.zip_code %}error{% endif %}">
        {% if errors.zip_code %}
        <div class="field-error">{{ errors.zip_code }}</div>
        {% endif %}

        <!-- Age -->
        <label for="age">Age:</label>
        <input 
            type="number" 
            id="age" 
            name="age" 
            value="{{ form_data.get('age', '') }}" 
            class="{% if errors.age %}error{% endif %}" 
            required>
        {% if errors.age %}
        <div class="field-error">{{ errors.age }}</div>
        {% endif %}

        <!-- Gender -->
        <label for="gender">Gender:</label>
        <select id="gender" name="gender" class="{% if errors.gender %}error{% endif %}" required>
            <option value="">Select</option>
            <option value="Male" {% if form_data.get('gender') == 'Male' %}selected{% endif %}>Male</option>
            <option value="Female" {% if form_data.get('gender') == 'Female' %}selected{% endif %}>Female</option>
            <option value="Other" {% if form_data.get('gender') == 'Other' %}selected{% endif %}>Other</option>
        </select>
        {% if errors.gender %}
        <div class="field-error">{{ errors.gender }}</div>
        {% endif %}

        <!-- Ethnicity -->
        <label for="ethnicity">Ethnicity:</label>
        <select id="ethnicity" name="ethnicity" class="{% if errors.ethnicity %}error{% endif %}" required>
            <option value="">Select</option>
            <option value="White" {% if form_data.get('ethnicity') == 'White' %}selected{% endif %}>White</option>
            <option value="Black or African American" {% if form_data.get('ethnicity') == 'Black or African American' %}selected{% endif %}>Black or African American</option>
            <option value="Hispanic or Latino" {% if form_data.get('ethnicity') == 'Hispanic or Latino' %}selected{% endif %}>Hispanic or Latino</option>
            <option value="Asian" {% if form_data.get('ethnicity') == 'Asian' %}selected{% endif %}>Asian</option>
            <option value="Other" {% if form_data.get('ethnicity') == 'Other' %}selected{% endif %}>Other</option>
        </select>
        {% if errors.ethnicity %}
        <div class="field-error">{{ errors.ethnicity }}</div>
        {% endif %}

        <!-- State -->
        <label for="state">State:</label>
        <select name="state" class="{% if errors.state %}error{% endif %}" required>
            <option value="">Select your state</option>
            {% for code in ['AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA',
                            'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK',
                            'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'] %}
            <option value="{{ code }}" {% if form_data.get('state') == code %}selected{% endif %}>{{ code }}</option>
            {% endfor %}
        </select>
        {% if errors.state %}
        <div class="field-error">{{ errors.state }}</div>
        {% endif %}

        <!-- Submit Button -->
        <button type="submit" class="button">Next</button>
    </form>
</div>
{% endblock %}
