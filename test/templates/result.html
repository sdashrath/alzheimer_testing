{% extends "base.html" %}

{% block content %}
<div class="section-content">
    <h1>Test Results</h1>

    <div class="results-summary">
        <div class="summary-card">
            <div class="result-circle">
                <svg viewBox="0 0 36 36" class="circular-chart orange">
                    <path class="circle-bg"
                          d="M18 2.0845
                             a 15.9155 15.9155 0 0 1 0 31.831
                             a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    <path class="circle"
                          stroke-dasharray="{{ risk_percentage }}, 100"
                          d="M18 2.0845
                             a 15.9155 15.9155 0 0 1 0 31.831
                             a 15.9155 15.9155 0 0 1 0 -31.831"/>
                </svg>
                <p class="percentage">{{ risk_percentage }}%</p>
            </div>
            <p class="risk-category"><strong>Risk Category:</strong> {{ risk_category }}</p>
        </div>            

        <div class="analysis">
            <h3>Risk Factor Analysis</h3>
            <ul>
                {% if memory_risk_score > 0 %}
                <li>Memory test risk detected. Engage in memory-strengthening activities such as puzzles.</li>
                {% endif %}
                
                {% if digit_risk_score > 0 %}
                <li>Digit test indicates potential memory issues. Practice numerical recall exercises.</li>
                {% endif %}
                
                {% if shape_risk_score > 0 %}
                <li>Shape memory test suggests visual-spatial challenges. Try visual puzzles or navigation tasks.</li>
                {% endif %}
                
                {% if lifestyle_genetic_score > 10 %}
                <li>Lifestyle and genetic factors contribute to your risk. Focus on improving diet, exercise, and social engagement.</li>
                {% endif %}
            </ul>
        </div>
    </div>

    <div class="detailed-results">
      <!--  <h3>Detailed Results</h3>
       <p><strong>Memory Test Score:</strong> {{ memory_score_raw }}</p>
        <p><strong>Memory Test Risk Score:</strong> {{ memory_risk_score }}</p>

       
        <p><strong>Digit Test Score:</strong> {{ digit_score_raw }}</p>
        <p><strong>Digit Test Risk Score:</strong> {{ digit_risk_score }}</p>

       
        <p><strong>Shape Memory Test Score:</strong> {{ shape_memory_score['correct_count'] }}/{{ shape_memory_score['total_correct'] }}</p>
        <p><strong>Shape Memory Test Risk Score:</strong> {{ shape_risk_score }}</p>

         <h4>Lifestyle and Genetic Scores</h4>
        <p><strong>Family History:</strong> {{ session.get('family_history', 0) }}</p>
        <p><strong>APOE Status:</strong> {{ session.get('apoe_status', 0) }}</p>
        <p><strong>Diet:</strong> {{ session.get('diet', 0) }}</p>
        <p><strong>Exercise:</strong> {{ session.get('exercise', 0) }}</p>
        <p><strong>Social Engagement:</strong> {{ session.get('social_engagement', 0) }}</p> -->

        <h3>Total Scores</h3>
        <p><strong>Total Cognitive Risk Score:</strong> {{ total_cognitive_risk_score }}</p>
        <p><strong>Total Lifestyle and Genetic Risk Score:</strong> {{ lifestyle_genetic_score }}</p>
        <p><strong>Total Risk Score:</strong> {{ total_risk_score }}</p>
        <p><strong>Risk Category:</strong> {{ risk_category }}</p> 
    </div>
</div>

<script>
    // Animate the circular progress
    document.querySelectorAll('.circle').forEach((circle) => {
        const value = parseInt(circle.getAttribute('stroke-dasharray').split(',')[0]);
        circle.style.strokeDasharray = `${value}, 100`;
    });
</script>
{% endblock %}
